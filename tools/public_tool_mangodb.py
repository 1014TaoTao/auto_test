#!/usr/bin/python3
# -*- coding: utf-8 -*-

"""
@Time    : 2022/3/8 11:10
@Author  : ZhangTAO
@File    : mango_tool.py
@Software: PyCharm
"""
import sys

import pymongo
from loguru import logger

"""
注意mongodb的版本，这里我使用pymongo~=3.11.4 版本，如果最新会报错，python-dateutil~=2.8.2
"""


class MongodbHandle:
    def __init__(self, host, port, db_name, user, password):
        """
        :param host: 连接地址
        :param port: 端口
        :param db_name: 数据库名称
        :param user: 用户
        :param password: 密码
        """
        logger.info(
            f"""
                host:{host},
                port:{port},
                db_name:{db_name},
                user:{user},
                password:{password}
            """
        )
        self.conn = pymongo.MongoClient(host, port)
        self.db = eval(f'self.conn.{db_name}')
        self.db.authenticate(user, password)

    def insert_collection(self, collection_name, value):  # 单个插入
        mycol = self.db[collection_name]
        mycol_id = mycol.insert_one(value)
        return mycol_id.inserted_id  # 返回insert_id，即插入文档的id值

    def insert_batch_collection(self, collection_name, value_list):  # 批量插入
        mycol = self.db[collection_name]
        mycol_id = mycol.insert_many(value_list)
        return mycol_id.inserted_ids  # 返回insert_id集合，即插入文档的id值

    def select_one_collection(self, collection_name, search_col=None):  # 获取一条数据
        '''search_col：只能是dict类型,key大于等于一个即可，也可为空
        可使用修饰符查询：{"name": {"$gt": "H"}}#读取 name 字段中第一个字母 ASCII 值大于 "H" 的数据
        使用正则表达式查询：{"$regex": "^R"}#读取 name 字段中第一个字母为 "R" 的数据'''
        my_col = self.db[collection_name]
        try:
            result = my_col.find_one(search_col)  # 这里只会返回一个对象，数据需要自己取
            return result
        except TypeError as e:
            logger.error('查询条件只能是dict类型')
            return None

    def select_all_collection(self, collection_name, search_col=None, limit_num=sys.maxsize, sort_col='None_sort',
                              sort='asc'):
        """search_col：只能是dict类型,key大于等于一个即可，也可为空
        可使用修饰符查询：{"name": {"$gt": "H"}}#读取 name 字段中第一个字母 ASCII 值大于 "H" 的数据
        使用正则表达式查询：{"$regex": "^R"}#读取 name 字段中第一个字母为 "R" 的数据
        limit_num:返回指定条数记录，该方法只接受一个数字参数(sys.maxsize:返回一个最大的整数值)"""
        my_col = self.db[collection_name]
        try:
            if sort_col == False or sort_col == 'None_sort':
                results = my_col.find(search_col).limit(limit_num)  # 这里只会返回一个对象，数据需要自己取
            else:
                sort_flag = 1
                if sort == 'desc':
                    sort_flag = -1
                results = my_col.find(search_col).sort(sort_col, sort_flag).limit(limit_num)  # 这里只会返回一个对象，数据需要自己取
            result_all = [i for i in results]  # 将获取到的数据添加至list
            return result_all
        except TypeError as e:
            logger.error('查询条件只能是dict类型')
            return None

    def select_count_collection(self, collection_name, search_col=None):
        """
        统计查询数量
        :param collection_name:
        :param search_col:
        :return:
        """
        my_col = self.db[collection_name]

        results_count = my_col.count_documents(search_col)  # 这里只会返回一个对象，数据需要自己取

        return results_count

    def update_one_collecton(self, collection_name, search_col, update_col):
        '''该方法第一个参数为查询的条件，第二个参数为要修改的字段。
            如果查找到的匹配数据多余一条，则只会修改第一条。
            修改后字段的定义格式： { "$set": { "alexa": "12345" } }'''
        my_col = self.db[collection_name]
        try:
            relust = my_col.update_one(search_col, update_col)
            return relust
        except TypeError as e:
            logger.error('查询条件与需要修改的字段只能是dict类型')
            return None

    def update_batch_collecton(self, collection_name, search_col, update_col):
        '''批量更新数据'''
        my_col = self.db[collection_name]
        try:
            relust = my_col.update_many(search_col, update_col)
            return relust
        except TypeError as e:
            logger.error('查询条件与需要修改的字段只能是dict类型')
            return None

    def delete_one_collection(self, collection_name, search_col):  # 删除集合中的文档
        my_col = self.db[collection_name]
        try:
            relust = my_col.delete_one(search_col)
            return relust
        except TypeError as e:
            logger.error('查询条件与需要修改的字段只能是dict类型')
            return None

    def delete_batch_collection(self, collection_name, search_col):  # 删除集合中的多个文档
        """删除所有 name 字段中以 F 开头的文档:{ "name": {"$regex": "^F"} }
        删除所有文档：{}"""
        my_col = self.db[collection_name]
        try:
            relust = my_col.delete_many(search_col)
            return relust
        except TypeError as e:
            logger.error('查询条件与需要修改的字段只能是dict类型')
            return None

    def drop_collection(self, collection_name):
        """删除集合，如果删除成功 drop() 返回 true，如果删除失败(集合不存在)则返回 false"""
        my_col = self.db[collection_name]
        result = my_col.drop()
        return result

    def get_connections(self):  # 获取所有的connections
        return self.db.list_collection_names()

    def close_db(self):
        self.conn.close()
        logger.info('mongo连接已关闭')
        return 'mongo连接已关闭'


# if __name__ == '__main__':
#     import uuid
#     import bson
#     from dateutil import parser

    # host = '10.0.34.13'
    # port = 37017
    # db_name = 'potato_kube'
    # user = 'potatokube'
    # password = 'ecbe95b861'
    #
    # M = MongodbHandle(host, port, db_name, user, password)
    #
    # table_list = M.get_connections()
    # ['tekton_task', 'argo_operator', 'argo_workflow', 'potato_kube', 'tekton_pipeline']

    # 删除
    # M.delete_batch_collection(collection_name='argo_workflow',
    #                           search_col={"name": {"$regex": "^workflow-code-"}})
    #
    # operator = M.select_all_collection(collection_name='argo_workflow',
    #                                    search_col={"name": {"$regex": "^workflow-code-"}})
    # # {"name": { $regex: / operator - form - /}}
    # operator_count = M.select_count_collection(collection_name='argo_workflow',
    #                                            search_col={"name": {"$regex": "^workflow-code-"}})
    # print(operator)
    # print(operator_count)

    """
    案例：
        {
            _id: "095c6ce79fb8459c866d7151df6f72d9",
            type: NumberInt("1"),
            name: "wq-test-0301-01",
            workflowRealName: "wq-test-0301-01-oixpl8",
            generateName: "wq-test-0301-01",
            namespace: "default",
            category: "wq-test",
            description: "测试01",
            workflowParams: "[{\"id\":\"param1646110769937\",\"name\":\"msg\",\"value\":\"10\",\"description\":\"打印信息\"}]",
            executorPolicy: "{}",
            workspaces: "[{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"name\":\"workspace\",\"hostPath\":{\"path\":\"/mnt/cephfs\",\"type\":\"DirectoryOrCreate\"}}]",
            operatorParams: "[{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"argoConditions\":[],\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"argoConditions\":[{\"repeat\":{\"withSequence\":{\"count\":\"10\",\"start\":\"0\"}}}],\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"description\":\"时间\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"argoConditions\":[],\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"3\",\"description\":\"时间\"},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"description\":\"循环次数\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a\\u003d1;a\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"argoConditions\":[],\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]}]",
            subWorkflowParams: "[]",
            template: "{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Workflow\",\"metadata\":{\"generateName\":\"wq-test-0301-01\",\"name\":\"wq-test-0301-01-oixpl8\",\"namespace\":\"default\"},\"spec\":{\"arguments\":{\"parameters\":[{\"name\":\"msg\",\"value\":\"10\",\"description\":\"打印信息\"}]},\"entrypoint\":\"main\",\"templates\":[{\"dag\":{\"tasks\":[{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}]},\"name\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\",\"template\":\"echo-n945ls\"},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\",\"value\":\"30\",\"description\":\"时间\"}]},\"dependencies\":[\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\"],\"name\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\",\"template\":\"sleep-o8oe26\",\"withSequence\":{\"count\":\"10\",\"start\":\"0\"}},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\",\"value\":\"3\",\"description\":\"时间\"},{\"name\":\"count\",\"value\":\"100\",\"description\":\"循环次数\"}]},\"dependencies\":[\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\"],\"name\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\",\"template\":\"sleep-loop-xwx8sl\"},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}]},\"dependencies\":[\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\"],\"name\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew--1rmtk5\",\"template\":\"echo-j5wwwr\"}]},\"inputs\":{\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"main\"},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"echo {{inputs.parameters.msg}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"echo\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"echo-n945ls\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"sleep {{inputs.parameters.time}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"name\":\"sleep\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\"}]},\"name\":\"sleep-o8oe26\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"for((a\\u003d1;a\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"name\":\"sleep\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\"},{\"name\":\"count\"}]},\"name\":\"sleep-loop-xwx8sl\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"echo {{inputs.parameters.msg}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"echo\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"echo-j5wwwr\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}}],\"volumeClaimTemplates\":[],\"volumes\":[{\"hostPath\":{\"path\":\"/mnt/cephfs\",\"type\":\"DirectoryOrCreate\"},\"name\":\"workspace\"}]}}",
            dag: "[{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"34093155-3504-41ba-a46d-5ee4e1b81609\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"270cbfa3-04ff-4309-b485-a4f6d0ba1c45\",\"port\":\"port2\"},\"target\":{\"cell\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"port\":\"port1\"}},{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"52c50987-9dff-47a0-91a5-6decbdf80240\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"port\":\"port2\"},\"target\":{\"cell\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"port\":\"port1\"}},{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"6e2830c4-31f4-40fa-b0a5-89a19c3bf790\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"port\":\"port2\"},\"target\":{\"cell\":\"b9e0dc3d-3217-4d32-85d0-46d90d16d0eb\",\"port\":\"port1\"}},{\"position\":{\"x\":-396,\"y\":-204},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"270cbfa3-04ff-4309-b485-a4f6d0ba1c45\",\"type\":\"startNode\",\"data\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"name\":\"echo\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"},\"metadata\":{\"name\":\"echo\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"打印\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":1,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":-236,\"y\":-96},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"type\":\"startNode\",\"data\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e8\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"name\":\"sleep\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"},\"metadata\":{\"name\":\"sleep\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"休眠\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":2,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":-60,\"y\":24},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"type\":\"startNode\",\"data\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"valueFrom\":null,\"description\":\"循环次数\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a=1;a<{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep-loop\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"},\"metadata\":{\"name\":\"sleep-loop\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"valueFrom\":null,\"description\":\"循环次数\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a=1;a<{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep-loop\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"休眠循环\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":3,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":100,\"y\":182},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"b9e0dc3d-3217-4d32-85d0-46d90d16d0eb\",\"type\":\"startNode\",\"data\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew--1rmtk5\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"name\":\"echo\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"},\"metadata\":{\"name\":\"echo\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"打印\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":4,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}}]",
            operatorCount: NumberInt("4"),
            "tenant_id": NumberLong("1"),
            "update_user": NumberLong("5627"),   # NumberLong用python中 bson.int64.Int64(字符串) 代替
            "update_time": ISODate("2022-03-05T22:56:51.437Z"),  # ISODate用python中 parser.parse("2022-03-05T09:05:51.132Z") 代替
            _class: "com.tudou.potato.kube.entity.domain.ArgoWorkflow"
        }
    """

    # if "argo_workflow" in table_list:
    #     print("数据库存在！")
    #     for i in range(1, 51):
            # 算子表单模式
            # biaodan = {
            #     "_id": ''.join(str(uuid.uuid4()).split('-')),
            #     "name": f"operator-form-{i}",
            #     "generate_name": f"operator-form-{i}",
            #     "description": "表单算子",
            #     "namespace": "default",
            #     "category": f"表单模式{i}",
            #     "argo_params": "{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"\\\"hello world\\\"\",\"description\":\"msg to print\\n          算子要打印的信息\"}],\"argoOutputParamList\":[{\"index\":\"2\",\"name\":\"event-meg\",\"value\":\"\\\"ok\\\"\",\"description\":\"conditions info\"},{\"index\":\"3\",\"name\":\"kubectl-version\",\"valueFrom\":\"/workspace/kube-version.txt\",\"description\":\"\"}],\"argoInputArtifactList\":[{\"index\":\"1\",\"name\":\"kubectl\",\"path\":\"/bin/kubectl\",\"argoS3Artifact\":{\"key\":\"kubectl/linux-amd64-v1.19.11-kubectl\"}}],\"argoOutputArtifactList\":[{\"index\":\"4\",\"name\":\"kubectl-version\",\"path\":\"/workspace/kube-version.txt\",\"argoS3Artifact\":{\"key\":\"kubectl-version/version.txt\"}}]}",
            #     "workspace": "[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false},{\"name\":\"test-sh\",\"mountPath\":\"/workspace/test.sh\",\"readOnly\":false}]",
            #     "create_type": "general",
            #     "tab_type": "my",
            #     "argo_operator_step": "[{\"name\":\"step-01\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"IfNotPresent\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{\"TZ\":\"Asia/Shanghai\"},\"commandList\":[\"/bin/bash\",\"-c\"],\"argList\":[\"cowsay \\\"{{inputs.parameters.msg}}\\\" \\u0026\\u0026 sleep 1 \\u0026\\u0026 /workspace/test.sh\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]",
            #     "template": "{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Workflow\",\"metadata\":{\"annotations\":{},\"generateName\":\"operator-template-%s\",\"labels\":{},\"namespace\":\"default\"},\"spec\":{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"\\\"hello world\\\"\",\"description\":\"msg to print\\n          算子要打印的信息\"}]},\"entrypoint\":\"main\",\"templates\":[{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"cowsay \\\"{{inputs.parameters.msg}}\\\" \\u0026\\u0026 sleep 1 \\u0026\\u0026 /workspace/test.sh\"],\"command\":[\"/bin/bash\",\"-c\"],\"env\":[{\"name\":\"TZ\",\"value\":\"Asia/Shanghai\"}],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"step-01\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false},{\"mountPath\":\"/workspace/test.sh\",\"name\":\"test-sh\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[{\"mode\":777,\"name\":\"kubectl\",\"path\":\"/bin/kubectl\",\"s3\":{\"key\":\"kubectl/linux-amd64-v1.19.11-kubectl\"}}],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"main\",\"outputs\":{\"artifacts\":[{\"name\":\"kubectl-version\",\"path\":\"/workspace/kube-version.txt\",\"s3\":{\"key\":\"kubectl-version/version.txt\"}}],\"parameters\":[{\"name\":\"event-meg\",\"value\":\"\\\"ok\\\"\",\"description\":\"conditions info\"},{\"name\":\"kubectl-version\",\"valueFrom\":{\"path\":\"/workspace/kube-version.txt\"},\"description\":\"\"}]}}]}}" % i,
            #     "create_user": bson.int64.Int64("5627"),
            #     "update_user": bson.int64.Int64("5627"),
            #     "tenant_id": bson.int64.Int64("1"),
            #     "update_time": parser.parse("2022-03-05T09:05:51.132Z"),
            #     "_class": "com.tudou.potato.kube.entity.domain.ArgoOperator"
            # }
            # 算子代码模式
            # daima = {
            #     "_id": ''.join(str(uuid.uuid4()).split('-')),
            #     "name": f"operator-code-{i}",
            #     "generate_name": f"operator-code-{i}",
            #     "description": "代码算子",
            #     "namespace": "default",
            #     "category": f"代码模式{i}",
            #     "argo_params": "{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"description\":\"\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[{\"index\":\"1\",\"name\":\"kubectl-version-file\",\"path\":\"/workspace/kubectl-version.txt\",\"argoS3Artifact\":{\"key\":\"kubectl-version/version.txt\"}}],\"argoOutputArtifactList\":[]}",
            #     "workspace": "[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}]",
            #     "create_type": "general",
            #     "tab_type": "my",
            #     "argo_operator_step": "[{\"name\":\"stp-02\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"/bin/bash\",\"-c\"],\"argList\":[\"cowsay \\\"{{inputs.parameters.msg}}\\\" \\u0026\\u0026 cat /workspace/kubectl-version.txt\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]",
            #     "template": "{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Workflow\",\"metadata\":{\"annotations\":{},\"generateName\":\"operator-code-%s\",\"labels\":{},\"namespace\":\"default\"},\"spec\":{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"hello world\",\"description\":\"\"}]},\"entrypoint\":\"main\",\"templates\":[{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"cowsay \\\"{{inputs.parameters.msg}}\\\" \\u0026\\u0026 cat /workspace/kubectl-version.txt\"],\"command\":[\"/bin/bash\",\"-c\"],\"env\":[],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"stp-02\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[{\"mode\":777,\"name\":\"kubectl-version-file\",\"path\":\"/workspace/kubectl-version.txt\",\"s3\":{\"key\":\"kubectl-version/version.txt\"}}],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"main\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}}]}}" % i,
            #     "create_user": bson.int64.Int64("5570"),
            #     "update_user": bson.int64.Int64("5570"),
            #     "tenant_id": bson.int64.Int64("1"),
            #     "update_time": parser.parse("2022-02-28T22:23:20.306Z"),
            #     "_class": "com.tudou.potato.kube.entity.domain.ArgoOperator"
            # }
            # M.insert_collection('argo_operator', biaodan)
            # M.insert_collection('argo_operator', daima)


            # # 流程画布模式
            # biaodan = {
            #     "_id": ''.join(str(uuid.uuid4()).split('-')),
            #     "type": bson.int64.Int64("1"),
            #     "name": f"workflow-form-{i}",
            #     "workflowRealName": f"workflow-form-{i}-oixpl8",
            #     "generateName": f"workflow-form-{i}",
            #     "namespace": "default",
            #     "category": f"画布模式{i}",
            #     "description": "画布创建流程",
            #     "workflowParams": "[{\"id\":\"param1646110769937\",\"name\":\"msg\",\"value\":\"10\",\"description\":\"打印信息\"}]",
            #     "executorPolicy": "{}",
            #     "workspaces": "[{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"name\":\"workspace\",\"hostPath\":{\"path\":\"/mnt/cephfs\",\"type\":\"DirectoryOrCreate\"}}]",
            #     "operatorParams": "[{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"argoConditions\":[],\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"argoConditions\":[{\"repeat\":{\"withSequence\":{\"count\":\"10\",\"start\":\"0\"}}}],\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"description\":\"时间\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"argoConditions\":[],\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"3\",\"description\":\"时间\"},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"description\":\"循环次数\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a\\u003d1;a\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]},{\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"argoConditions\":[],\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"\",\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"\",\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}]}]",
            #     "subWorkflowParams": "[]",
            #     "template": "{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Workflow\",\"metadata\":{\"generateName\":\"workflow-form-%s\",\"name\":\"workflow-form-%s-oixpl8\",\"namespace\":\"default\"},\"spec\":{\"arguments\":{\"parameters\":[{\"name\":\"msg\",\"value\":\"10\",\"description\":\"打印信息\"}]},\"entrypoint\":\"main\",\"templates\":[{\"dag\":{\"tasks\":[{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}]},\"name\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\",\"template\":\"echo-n945ls\"},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\",\"value\":\"30\",\"description\":\"时间\"}]},\"dependencies\":[\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\"],\"name\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\",\"template\":\"sleep-o8oe26\",\"withSequence\":{\"count\":\"10\",\"start\":\"0\"}},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\",\"value\":\"3\",\"description\":\"时间\"},{\"name\":\"count\",\"value\":\"100\",\"description\":\"循环次数\"}]},\"dependencies\":[\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\"],\"name\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\",\"template\":\"sleep-loop-xwx8sl\"},{\"arguments\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\",\"description\":\"打印信息\"}]},\"dependencies\":[\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\"],\"name\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew--1rmtk5\",\"template\":\"echo-j5wwwr\"}]},\"inputs\":{\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"main\"},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"echo {{inputs.parameters.msg}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"echo\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"echo-n945ls\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"sleep {{inputs.parameters.time}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"name\":\"sleep\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\"}]},\"name\":\"sleep-o8oe26\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"for((a\\u003d1;a\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"name\":\"sleep\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"time\"},{\"name\":\"count\"}]},\"name\":\"sleep-loop-xwx8sl\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}},{\"activeDeadlineSeconds\":\"86400\",\"container\":{\"args\":[\"echo {{inputs.parameters.msg}}\"],\"command\":[\"sh\",\"-c\"],\"env\":[],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"echo\",\"resources\":{\"limits\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"memory\":\"1Gi\",\"cpu\":\"1\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/workspace\",\"name\":\"workspace\",\"readOnly\":false}]},\"inputs\":{\"artifacts\":[],\"parameters\":[{\"name\":\"msg\"}]},\"name\":\"echo-j5wwwr\",\"outputs\":{\"artifacts\":[],\"parameters\":[]}}],\"volumeClaimTemplates\":[],\"volumes\":[{\"hostPath\":{\"path\":\"/mnt/cephfs\",\"type\":\"DirectoryOrCreate\"},\"name\":\"workspace\"}]}}" % (
            #         i, i),
            #     "dag": "[{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"34093155-3504-41ba-a46d-5ee4e1b81609\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"270cbfa3-04ff-4309-b485-a4f6d0ba1c45\",\"port\":\"port2\"},\"target\":{\"cell\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"port\":\"port1\"}},{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"52c50987-9dff-47a0-91a5-6decbdf80240\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"port\":\"port2\"},\"target\":{\"cell\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"port\":\"port1\"}},{\"shape\":\"edge\",\"attrs\":{\"line\":{\"stroke\":\"#1890ff\",\"strokeWidth\":1,\"targetMarker\":{\"name\":\"classic\",\"size\":8},\"strokeDasharray\":0,\"style\":{\"animation\":\"ant-line 30s infinite linear\"}}},\"id\":\"6e2830c4-31f4-40fa-b0a5-89a19c3bf790\",\"connector\":\"curve\",\"router\":{\"name\":\"manhattan\"},\"zIndex\":0,\"labels\":[{\"text\":\"\"}],\"source\":{\"cell\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"port\":\"port2\"},\"target\":{\"cell\":\"b9e0dc3d-3217-4d32-85d0-46d90d16d0eb\",\"port\":\"port1\"}},{\"position\":{\"x\":-396,\"y\":-204},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"270cbfa3-04ff-4309-b485-a4f6d0ba1c45\",\"type\":\"startNode\",\"data\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2--oq9nat\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl--7whbf2\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866--23odcl\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89--roj866\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7--vxqj89\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"type\":1,\"taskName\":\"echo--g65vb7\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\",\"name\":\"echo\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"},\"metadata\":{\"name\":\"echo\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101424113\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"打印\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":1,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":-236,\"y\":-96},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"9a4e5c58-e361-42b1-ade4-cb4cf9e7345b\",\"type\":\"startNode\",\"data\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3--7ws1dm\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5--lo1sb3\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x--7fcix5\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf--fpmn2x\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080--i9piuf\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"type\":1,\"taskName\":\"sleep--geq080\",\"name\":\"sleep\",\"task\":{\"spec\":{\"id\":\"156ceccc1c87412080448a2423a897e8\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\",\"name\":\"sleep\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"},\"metadata\":{\"name\":\"sleep\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"sleep {{inputs.parameters.time}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep\",\"description\":\"休眠\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"156ceccc1c87412080448a2423a897e8\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"sleep {{inputs.parameters.time}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep\",\"generalId\":\"156ceccc1c87412080448a2423a897e81646101431296\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"休眠\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":2,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":-60,\"y\":24},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"731474c8-32fa-4be1-9fe8-d2333db50f57\",\"type\":\"startNode\",\"data\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br--92mle8\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k--3772br\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z--c0m49k\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5--y8q70z\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z--olclk5\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"type\":1,\"taskName\":\"sleep-loop--xqi62z\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\",\"name\":\"sleep-loop\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"valueFrom\":null,\"description\":\"循环次数\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a=1;a<{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep-loop\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"},\"metadata\":{\"name\":\"sleep-loop\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"time\",\"value\":\"30\",\"valueFrom\":null,\"description\":\"时间\",\"openStatus\":null},{\"index\":\"1\",\"name\":\"count\",\"value\":\"100\",\"valueFrom\":null,\"description\":\"循环次数\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"}],\"argoOperatorStepList\":[{\"name\":\"sleep\",\"image\":\"centos:7\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"for((a=1;a<{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"sleep-loop\",\"description\":\"休眠循环\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ea268f4ea1914071bf9c837685b649d0\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"sleep-loop\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\",\\\"value\\\":\\\"30\\\",\\\"description\\\":\\\"时间\\\"},{\\\"name\\\":\\\"count\\\",\\\"value\\\":\\\"100\\\",\\\"description\\\":\\\"循环次数\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"for((a\\\\u003d1;a\\\\u003c{{inputs.parameters.count}};a++)); do sleep {{inputs.parameters.time}}; echo $a;done\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"centos:7\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"sleep\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"time\\\"},{\\\"name\\\":\\\"count\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"sleep-loop\",\"generalId\":\"ea268f4ea1914071bf9c837685b649d01646101445034\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"休眠循环\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":3,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}},{\"position\":{\"x\":100,\"y\":182},\"size\":{\"width\":160,\"height\":40},\"view\":\"vue-shape-view\",\"shape\":\"vue-shape\",\"id\":\"b9e0dc3d-3217-4d32-85d0-46d90d16d0eb\",\"type\":\"startNode\",\"data\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew--1rmtk5\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8--ft7bew\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi--psn9g8\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm--91wqyi\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3--9wf1fm\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"type\":1,\"taskName\":\"echo--mwv4f3\",\"name\":\"echo\",\"task\":{\"spec\":{\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\",\"name\":\"echo\",\"task\":{\"spec\":{\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"},\"metadata\":{\"name\":\"echo\",\"namespace\":\"default\"},\"argoParams\":{\"argoInputParamList\":[{\"index\":\"0\",\"name\":\"msg\",\"value\":\"hello world\",\"valueFrom\":null,\"description\":\"打印信息\",\"openStatus\":null}],\"argoOutputParamList\":[],\"argoInputArtifactList\":[],\"argoOutputArtifactList\":[]},\"workspaceList\":[{\"name\":\"workspace\",\"mountPath\":\"/workspace\",\"readOnly\":false,\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"}],\"argoOperatorStepList\":[{\"name\":\"echo\",\"image\":\"docker/whalesay:latest\",\"imageFromKube\":null,\"imagePullPolicy\":\"Always\",\"activeDeadlineSeconds\":\"86400\",\"limit\":\"0\",\"retryPolicy\":\"Never\",\"env\":{},\"commandList\":[\"sh\",\"-c\"],\"argList\":[\"echo {{inputs.parameters.msg}}\"],\"resources\":{\"cpu\":\"1\",\"memory\":\"1Gi\",\"gpu\":\"0\"}}],\"name\":\"echo\",\"description\":\"打印\",\"namespace\":\"default\",\"category\":\"wudong-wq\",\"tabType\":\"my\",\"id\":\"ab95123150bf4d478d4192d00c4cae7a\",\"template\":\"{\\\"apiVersion\\\":\\\"argoproj.io/v1alpha1\\\",\\\"kind\\\":\\\"Workflow\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"generateName\\\":\\\"echo\\\",\\\"labels\\\":{},\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"arguments\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\",\\\"value\\\":\\\"hello world\\\",\\\"description\\\":\\\"打印信息\\\"}]},\\\"entrypoint\\\":\\\"main\\\",\\\"templates\\\":[{\\\"activeDeadlineSeconds\\\":\\\"86400\\\",\\\"container\\\":{\\\"args\\\":[\\\"echo {{inputs.parameters.msg}}\\\"],\\\"command\\\":[\\\"sh\\\",\\\"-c\\\"],\\\"env\\\":[],\\\"image\\\":\\\"docker/whalesay:latest\\\",\\\"imagePullPolicy\\\":\\\"Always\\\",\\\"name\\\":\\\"echo\\\",\\\"resources\\\":{\\\"limits\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"},\\\"requests\\\":{\\\"memory\\\":\\\"1Gi\\\",\\\"cpu\\\":\\\"1\\\",\\\"nvidia.com/gpu\\\":\\\"0\\\"}},\\\"volumeMounts\\\":[{\\\"mountPath\\\":\\\"/workspace\\\",\\\"name\\\":\\\"workspace\\\",\\\"readOnly\\\":false}]},\\\"inputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[{\\\"name\\\":\\\"msg\\\"}]},\\\"name\\\":\\\"main\\\",\\\"outputs\\\":{\\\"artifacts\\\":[],\\\"parameters\\\":[]}}]}}\",\"createType\":\"general\",\"generateName\":\"echo\",\"generalId\":\"ab95123150bf4d478d4192d00c4cae7a1646101449271\"},\"operatorCount\":0,\"type\":\"operstor\",\"baseInfor\":{\"category\":\"wudong-wq\",\"description\":\"打印\",\"namespace\":\"default\"},\"condition\":[]}}}}}}}}}}}}},\"component\":\"start-node-component\",\"zIndex\":4,\"ports\":{\"groups\":{\"top\":{\"position\":\"top\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}},\"bottom\":{\"position\":\"bottom\",\"attrs\":{\"circle\":{\"r\":4,\"magnet\":true,\"stroke\":\"#2D8CF0\",\"strokeWidth\":1,\"fill\":\"#fff\"}}}},\"items\":[{\"id\":\"port1\",\"group\":\"top\"},{\"id\":\"port2\",\"group\":\"bottom\"}]}}]",
            #     "operatorCount": bson.int64.Int64("4"),
            #     "tenant_id": bson.int64.Int64("1"),
            #     "update_user": bson.int64.Int64("5627"),
            #     "update_time": parser.parse("2022-03-05T22:56:51.437Z"),
            #     "_class": "com.tudou.potato.kube.entity.domain.ArgoWorkflow"
            # }
            # # 流程代码模式
            # daima = {
            #     "_id": ''.join(str(uuid.uuid4()).split('-')),
            #     "type": bson.int64.Int64("2"),
            #     "name": f"workflow-code-{i}",
            #     "workflowRealName": f"workflow-code-{i}-kgtaw7",
            #     "generateName": f"workflow-code-{i}",
            #     "namespace": "default",
            #     "category": f"代码模式{i}",
            #     "description": "代码创建流程",
            #     "workflowParams": "[{\"name\":\"msg\",\"value\":\"5\"},{\"name\":\"time\",\"value\":\"600\"},{\"name\":\"output_path\",\"value\":\"/tmp/test测试\"}]",
            #     "executorPolicy": "{}",
            #     "workspaces": "[{\"name\":\"workdir\",\"hostPath\":{\"path\":\"/mnt/cephfs\"}},{\"name\":\"sharedir\",\"hostPath\":{\"path\":\"/mnt/cifs\"}}]",
            #     "template": "{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Workflow\",\"metadata\":{\"generateName\":\"workflow-code-%s\",\"name\":\"workflow-code-%s-kgtaw7\",\"namespace\":\"default\"},\"spec\":{\"arguments\":{\"parameters\":[{\"name\":\"msg\",\"value\":\"5\"},{\"name\":\"time\",\"value\":\"600\"},{\"name\":\"output_path\",\"value\":\"/tmp/test测试\"}]},\"entrypoint\":\"main\",\"templates\":[{\"dag\":{\"tasks\":[{\"arguments\":{\"parameters\":[{\"name\":\"msg\",\"value\":\"{{inputs.parameters.msg}}\"},{\"name\":\"output_path\",\"value\":\"{{inputs.parameters.output_path}}.txt\"}]},\"name\":\"step1\",\"template\":\"op-output-parameters-xxx1\"},{\"arguments\":{\"parameters\":[{\"name\":\"msg\",\"value\":\"{{tasks.step1.outputs.parameters.msg}}\"},{\"name\":\"output_path\",\"value\":\"/tmp\"}]},\"dependencies\":[\"step1\"],\"name\":\"step2\",\"template\":\"op-input-parameters-xxx1\"},{\"arguments\":{\"parameters\":[{\"name\":\"time\",\"value\":\"{{inputs.parameters.time}}\"}]},\"dependencies\":[\"step1\"],\"name\":\"step3\",\"template\":\"op-sleep-xxx1\",\"withSequence\":{\"count\":\"5\"}}]},\"inputs\":{\"parameters\":[{\"name\":\"msg\"},{\"name\":\"time\"},{\"name\":\"output_path\"}]},\"metadata\":{},\"name\":\"main\",\"outputs\":{}},{\"container\":{\"args\":[\"echo {{inputs.parameters.msg}} \\u003e {{inputs.parameters.output_path}}\"],\"command\":[\"sh\",\"-c\"],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"write\",\"resources\":{\"limits\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/mnt/cephfs\",\"name\":\"workdir\"}]},\"inputs\":{\"parameters\":[{\"name\":\"msg\"},{\"name\":\"output_path\"}]},\"metadata\":{},\"name\":\"op-output-parameters-xxx1\",\"outputs\":{\"parameters\":[{\"name\":\"msg\",\"valueFrom\":{\"path\":\"{{inputs.parameters.output_path}}\"}}]}},{\"container\":{\"args\":[\"echo {{inputs.parameters.msg}}\"],\"command\":[\"sh\",\"-c\"],\"image\":\"docker/whalesay:latest\",\"imagePullPolicy\":\"Always\",\"name\":\"write\",\"resources\":{\"limits\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/mnt/cephfs\",\"name\":\"workdir\"},{\"mountPath\":\"/mnt/cifs\",\"name\":\"sharedir\"}]},\"inputs\":{\"parameters\":[{\"name\":\"msg\"},{\"name\":\"output_path\"}]},\"metadata\":{},\"name\":\"op-input-parameters-xxx1\",\"outputs\":{}},{\"container\":{\"args\":[\"for((a\\u003d1;a\\u003c100;a++)); do sleep 10; echo $a;done\"],\"command\":[\"sh\",\"-c\"],\"image\":\"centos:7\",\"imagePullPolicy\":\"Always\",\"name\":\"write\",\"resources\":{\"limits\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"},\"requests\":{\"cpu\":\"200m\",\"memory\":\"3000Mi\",\"nvidia.com/gpu\":\"0\"}},\"volumeMounts\":[{\"mountPath\":\"/mnt/cephfs\",\"name\":\"workdir\"},{\"mountPath\":\"/mnt/cifs\",\"name\":\"sharedir\"}]},\"inputs\":{\"parameters\":[{\"name\":\"time\"}]},\"metadata\":{},\"name\":\"op-sleep-xxx1\",\"outputs\":{}}],\"ttlStrategy\":{\"secondsAfterCompletion\":604800,\"secondsAfterSuccess\":604800},\"volumes\":[{\"hostPath\":{\"path\":\"/mnt/cephfs\"},\"name\":\"workdir\"},{\"hostPath\":{\"path\":\"/mnt/cifs\"},\"name\":\"sharedir\"}]}}" % (
            #         i, i),
            #     "operatorCount": bson.int64.Int64("3"),
            #     "tenant_id": bson.int64.Int64("1"),
            #     "update_user": bson.int64.Int64("5627"),
            #     "update_time": parser.parse("2022-03-05T09:43:55.146Z"),
            #     "_class": "com.tudou.potato.kube.entity.domain.ArgoWorkflow"
            # }
            # M.insert_collection('argo_workflow', biaodan)
            # M.insert_collection('argo_workflow', daima)
            # logger.info(f"插入条数：{i * 2}")
